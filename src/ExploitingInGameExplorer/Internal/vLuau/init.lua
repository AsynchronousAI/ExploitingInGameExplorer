local Fiu = require(script.Fiu)
local LuauCeption = require(script.LuauCeption)
function luau_getenv()
	local a = getfenv(2)
	for n, i in require(game.ReplicatedStorage.xAPI) do
		a[n] = i
	end
	return a
end
return setmetatable({
	luau_compile = LuauCeption.luau_compile,
	luau_execute = function(source: string)
		local compiled = LuauCeption.luau_compile(source)
		
		if buffer.readu8(buffer.fromstring(compiled), 0) == 0 then
			return nil, compiled
		end
		
		return Fiu.luau_load(compiled, luau_getenv())
	end,
	luau_getenv = luau_getenv,
	luau_load = Fiu.luau_load
}, {
	__call = function(self, source: string)
		return self.luau_execute(source)
	end,
})
